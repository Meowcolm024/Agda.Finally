<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>NbE</title>
  <link rel="stylesheet" href="./static/Agda.css">
  <link rel="stylesheet" href="./static/style.css">
</head>

<body>
  <div class="container">
    <nav class="sidebar">
      <a href="./">
        <h2>Agda, Finally...</h2>
      </a>
      <div class="section">
        <h3>STLC</h3>
        <ul>
          <li>
            <a href="stlc.base.html" class="">
              Basics
            </a>
          </li>
          <li>
            <a href="stlc.prop.html" class="">
              Properties
            </a>
          </li>
          <li>
            <a href="stlc.bigstep.html" class="">
              Bigstep
            </a>
          </li>
          <li>
            <a href="stlc.natural.html" class="">
              Natural Semantics
            </a>
          </li>
          <li>
            <a href="stlc.norm.html" class="">
              Normalization
            </a>
          </li>
          <li>
            <a href="stlc.soundness.html" class="">
              Semantic Typing
            </a>
          </li>
          <li>
            <a href="stlc.strengthen.html" class="">
              Strengthening
            </a>
          </li>
          <li>
            <a href="stlc.subst.html" class="">
              Substitution
            </a>
          </li>
          <li>
            <a href="stlc.clos.html" class="">
              Closure Calculus
            </a>
          </li>
        </ul>
      </div>
      <div class="section">
        <h3>Extra</h3>
        <ul>
          <li>
            <a href="extra.unscoped.html" class="">
              Unscoped
            </a>
          </li>
          <li>
            <a href="extra.nbe.html" class="active">
              NbE
            </a>
          </li>
          <li>
            <a href="extra.sigma.html" class="">
              Explicit Substitutions
            </a>
          </li>
          <li>
            <a href="extra.mu.html" class="">
              Recursive Types
            </a>
          </li>
          <li>
            <a href="extra.systemf.html" class="">
              System F
            </a>
          </li>
        </ul>
      </div>
      <div class="section">
        <h3>Misc</h3>
        <ul>
          <li>
            <a href="finally.html" class="">
              Test
            </a>
          </li>
        </ul>
      </div>
      <a href="https://github.com/Meowcolm024/Agda.Finally">
        <h3>Github</h3>
      </a>
    </nav>

    <main class="content">
      <h1>NbE</h1>
      <blockquote>
<p>This part is adapted from <a href="https://doi.org/10.1007/978-3-030-33636-3_10">System F in Agda, for Fun and Profit</a></p>
</blockquote>
<pre class="Agda"><a id="143" class="Keyword">module</a> <a id="150" href="extra.nbe.html" class="Module">extra.nbe</a> <a id="160" class="Keyword">where</a>
</pre>
<h2>Imports</h2>
<pre class="Agda"><a id="191" class="Keyword">open</a> <a id="196" class="Keyword">import</a> <a id="203" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="212" class="Keyword">using</a> <a id="218" class="Symbol">(</a><a id="219" href="Data.Sum.Base.html#625" class="Datatype Operator">_⊎_</a><a id="222" class="Symbol">;</a> <a id="224" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a><a id="228" class="Symbol">;</a> <a id="230" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a><a id="234" class="Symbol">)</a>
</pre>
<h2>Prelude</h2>
<p>We define the intrinsically typed <em>stlc</em> as usual:</p>
<pre class="Agda"><a id="313" class="Keyword">infixr</a> <a id="320" class="Number">7</a> <a id="322" href="extra.nbe.html#364" class="InductiveConstructor Operator">_⇒_</a>

<a id="327" class="Keyword">data</a> <a id="Type"></a><a id="332" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="337" class="Symbol">:</a> <a id="339" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="343" class="Keyword">where</a>
  <a id="Type.`ℕ"></a><a id="351" href="extra.nbe.html#351" class="InductiveConstructor">`ℕ</a>  <a id="355" class="Symbol">:</a> <a id="357" href="extra.nbe.html#332" class="Datatype">Type</a>
  <a id="Type._⇒_"></a><a id="364" href="extra.nbe.html#364" class="InductiveConstructor Operator">_⇒_</a> <a id="368" class="Symbol">:</a> <a id="370" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="375" class="Symbol">→</a> <a id="377" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="382" class="Symbol">→</a> <a id="384" href="extra.nbe.html#332" class="Datatype">Type</a>

<a id="390" class="Keyword">infixl</a> <a id="397" class="Number">5</a> <a id="399" href="extra.nbe.html#449" class="InductiveConstructor Operator">_,-_</a>

<a id="405" class="Keyword">data</a> <a id="Context"></a><a id="410" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="418" class="Symbol">:</a> <a id="420" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="424" class="Keyword">where</a>
  <a id="Context.∅"></a><a id="432" href="extra.nbe.html#432" class="InductiveConstructor">∅</a>    <a id="437" class="Symbol">:</a> <a id="439" href="extra.nbe.html#410" class="Datatype">Context</a>
  <a id="Context._,-_"></a><a id="449" href="extra.nbe.html#449" class="InductiveConstructor Operator">_,-_</a> <a id="454" class="Symbol">:</a> <a id="456" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="464" class="Symbol">→</a> <a id="466" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="471" class="Symbol">→</a> <a id="473" href="extra.nbe.html#410" class="Datatype">Context</a>

<a id="482" class="Keyword">infix</a> <a id="488" class="Number">4</a> <a id="490" href="extra.nbe.html#500" class="Datatype Operator">_∋_</a>

<a id="495" class="Keyword">data</a> <a id="_∋_"></a><a id="500" href="extra.nbe.html#500" class="Datatype Operator">_∋_</a> <a id="504" class="Symbol">:</a> <a id="506" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="514" class="Symbol">→</a> <a id="516" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="521" class="Symbol">→</a> <a id="523" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="527" class="Keyword">where</a>
  <a id="_∋_.Z"></a><a id="535" href="extra.nbe.html#535" class="InductiveConstructor">Z</a> <a id="537" class="Symbol">:</a> <a id="539" class="Symbol">∀</a> <a id="541" class="Symbol">{</a><a id="542" href="extra.nbe.html#542" class="Bound">Γ</a> <a id="544" href="extra.nbe.html#544" class="Bound">A</a><a id="545" class="Symbol">}</a> <a id="547" class="Symbol">→</a> <a id="549" href="extra.nbe.html#542" class="Bound">Γ</a> <a id="551" href="extra.nbe.html#449" class="InductiveConstructor Operator">,-</a> <a id="554" href="extra.nbe.html#544" class="Bound">A</a> <a id="556" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="558" href="extra.nbe.html#544" class="Bound">A</a>
  <a id="_∋_.S"></a><a id="562" href="extra.nbe.html#562" class="InductiveConstructor">S</a> <a id="564" class="Symbol">:</a> <a id="566" class="Symbol">∀</a> <a id="568" class="Symbol">{</a><a id="569" href="extra.nbe.html#569" class="Bound">Γ</a> <a id="571" href="extra.nbe.html#571" class="Bound">A</a> <a id="573" href="extra.nbe.html#573" class="Bound">B</a><a id="574" class="Symbol">}</a> <a id="576" class="Symbol">→</a> <a id="578" href="extra.nbe.html#569" class="Bound">Γ</a> <a id="580" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="582" href="extra.nbe.html#571" class="Bound">A</a> <a id="584" class="Symbol">→</a> <a id="586" href="extra.nbe.html#569" class="Bound">Γ</a> <a id="588" href="extra.nbe.html#449" class="InductiveConstructor Operator">,-</a> <a id="591" href="extra.nbe.html#573" class="Bound">B</a> <a id="593" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="595" href="extra.nbe.html#571" class="Bound">A</a>

<a id="598" class="Keyword">infix</a>  <a id="605" class="Number">4</a> <a id="607" href="extra.nbe.html#654" class="Datatype Operator">_⊢_</a>
<a id="611" class="Keyword">infix</a>  <a id="618" class="Number">5</a> <a id="620" href="extra.nbe.html#723" class="InductiveConstructor Operator">ƛ_</a>
<a id="623" class="Keyword">infixl</a> <a id="630" class="Number">7</a> <a id="632" href="extra.nbe.html#764" class="InductiveConstructor Operator">_·_</a>
<a id="636" class="Keyword">infix</a>  <a id="643" class="Number">9</a> <a id="645" href="extra.nbe.html#1001" class="InductiveConstructor Operator">`_</a>

<a id="649" class="Keyword">data</a> <a id="_⊢_"></a><a id="654" href="extra.nbe.html#654" class="Datatype Operator">_⊢_</a> <a id="658" class="Symbol">(</a><a id="659" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="661" class="Symbol">:</a> <a id="663" href="extra.nbe.html#410" class="Datatype">Context</a><a id="670" class="Symbol">)</a> <a id="672" class="Symbol">:</a> <a id="674" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="679" class="Symbol">→</a> <a id="681" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="685" class="Keyword">where</a>
  <a id="_⊢_.`_"></a><a id="693" href="extra.nbe.html#693" class="InductiveConstructor Operator">`_</a>  <a id="697" class="Symbol">:</a> <a id="699" class="Symbol">∀</a> <a id="701" class="Symbol">{</a><a id="702" href="extra.nbe.html#702" class="Bound">A</a><a id="703" class="Symbol">}</a> <a id="705" class="Symbol">→</a> <a id="707" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="709" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="711" href="extra.nbe.html#702" class="Bound">A</a> <a id="713" class="Symbol">→</a> <a id="715" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="717" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="719" href="extra.nbe.html#702" class="Bound">A</a>
  <a id="_⊢_.ƛ_"></a><a id="723" href="extra.nbe.html#723" class="InductiveConstructor Operator">ƛ_</a>  <a id="727" class="Symbol">:</a> <a id="729" class="Symbol">∀</a> <a id="731" class="Symbol">{</a><a id="732" href="extra.nbe.html#732" class="Bound">A</a> <a id="734" href="extra.nbe.html#734" class="Bound">B</a><a id="735" class="Symbol">}</a> <a id="737" class="Symbol">→</a> <a id="739" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="741" href="extra.nbe.html#449" class="InductiveConstructor Operator">,-</a> <a id="744" href="extra.nbe.html#732" class="Bound">A</a> <a id="746" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="748" href="extra.nbe.html#734" class="Bound">B</a> <a id="750" class="Symbol">→</a> <a id="752" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="754" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="756" href="extra.nbe.html#732" class="Bound">A</a> <a id="758" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="760" href="extra.nbe.html#734" class="Bound">B</a>
  <a id="_⊢_._·_"></a><a id="764" href="extra.nbe.html#764" class="InductiveConstructor Operator">_·_</a> <a id="768" class="Symbol">:</a> <a id="770" class="Symbol">∀</a> <a id="772" class="Symbol">{</a><a id="773" href="extra.nbe.html#773" class="Bound">A</a> <a id="775" href="extra.nbe.html#775" class="Bound">B</a><a id="776" class="Symbol">}</a> <a id="778" class="Symbol">→</a> <a id="780" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="782" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="784" href="extra.nbe.html#773" class="Bound">A</a> <a id="786" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="788" href="extra.nbe.html#775" class="Bound">B</a> <a id="790" class="Symbol">→</a> <a id="792" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="794" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="796" href="extra.nbe.html#773" class="Bound">A</a> <a id="798" class="Symbol">→</a> <a id="800" href="extra.nbe.html#659" class="Bound">Γ</a> <a id="802" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="804" href="extra.nbe.html#775" class="Bound">B</a>
</pre>
<p>Definition of <strong>syntactic</strong> neutral (stuck computation) and normal terms:</p>
<pre class="Agda"><a id="894" class="Keyword">infix</a>  <a id="901" class="Number">4</a> <a id="903" href="extra.nbe.html#921" class="Datatype Operator">_⊢Nf_</a> <a id="909" href="extra.nbe.html#960" class="Datatype Operator">_⊢Ne_</a>

<a id="916" class="Keyword">data</a> <a id="_⊢Nf_"></a><a id="921" href="extra.nbe.html#921" class="Datatype Operator">_⊢Nf_</a> <a id="927" class="Symbol">(</a><a id="928" href="extra.nbe.html#928" class="Bound">Γ</a> <a id="930" class="Symbol">:</a> <a id="932" href="extra.nbe.html#410" class="Datatype">Context</a><a id="939" class="Symbol">)</a> <a id="941" class="Symbol">:</a> <a id="943" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="948" class="Symbol">→</a> <a id="950" href="Agda.Primitive.html#388" class="Primitive">Set</a>

<a id="955" class="Keyword">data</a> <a id="_⊢Ne_"></a><a id="960" href="extra.nbe.html#960" class="Datatype Operator">_⊢Ne_</a> <a id="966" class="Symbol">(</a><a id="967" href="extra.nbe.html#967" class="Bound">Γ</a> <a id="969" class="Symbol">:</a> <a id="971" href="extra.nbe.html#410" class="Datatype">Context</a><a id="978" class="Symbol">)</a> <a id="980" class="Symbol">:</a> <a id="982" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="987" class="Symbol">→</a> <a id="989" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="993" class="Keyword">where</a>
  <a id="_⊢Ne_.`_"></a><a id="1001" href="extra.nbe.html#1001" class="InductiveConstructor Operator">`_</a>  <a id="1005" class="Symbol">:</a> <a id="1007" class="Symbol">∀</a> <a id="1009" class="Symbol">{</a><a id="1010" href="extra.nbe.html#1010" class="Bound">A</a><a id="1011" class="Symbol">}</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="extra.nbe.html#967" class="Bound">Γ</a> <a id="1017" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="1019" href="extra.nbe.html#1010" class="Bound">A</a> <a id="1021" class="Symbol">→</a> <a id="1023" href="extra.nbe.html#967" class="Bound">Γ</a> <a id="1025" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="1029" href="extra.nbe.html#1010" class="Bound">A</a>
  <a id="_⊢Ne_._·_"></a><a id="1033" href="extra.nbe.html#1033" class="InductiveConstructor Operator">_·_</a> <a id="1037" class="Symbol">:</a> <a id="1039" class="Symbol">∀</a> <a id="1041" class="Symbol">{</a><a id="1042" href="extra.nbe.html#1042" class="Bound">A</a> <a id="1044" href="extra.nbe.html#1044" class="Bound">B</a><a id="1045" class="Symbol">}</a> <a id="1047" class="Symbol">→</a> <a id="1049" href="extra.nbe.html#967" class="Bound">Γ</a> <a id="1051" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="1055" href="extra.nbe.html#1042" class="Bound">A</a> <a id="1057" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="1059" href="extra.nbe.html#1044" class="Bound">B</a> <a id="1061" class="Symbol">→</a> <a id="1063" href="extra.nbe.html#967" class="Bound">Γ</a> <a id="1065" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="1069" href="extra.nbe.html#1042" class="Bound">A</a> <a id="1071" class="Symbol">→</a> <a id="1073" href="extra.nbe.html#967" class="Bound">Γ</a> <a id="1075" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="1079" href="extra.nbe.html#1044" class="Bound">B</a>

<a id="1082" class="Keyword">data</a> <a id="1087" href="extra.nbe.html#921" class="Datatype Operator">_⊢Nf_</a> <a id="1093" href="extra.nbe.html#1093" class="Bound">Γ</a> <a id="1095" class="Keyword">where</a>
  <a id="_⊢Nf_.ne"></a><a id="1103" href="extra.nbe.html#1103" class="InductiveConstructor">ne</a> <a id="1106" class="Symbol">:</a> <a id="1108" class="Symbol">∀</a> <a id="1110" class="Symbol">{</a><a id="1111" href="extra.nbe.html#1111" class="Bound">A</a><a id="1112" class="Symbol">}</a> <a id="1114" class="Symbol">→</a> <a id="1116" href="extra.nbe.html#1093" class="Bound">Γ</a> <a id="1118" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="1122" href="extra.nbe.html#1111" class="Bound">A</a> <a id="1124" class="Symbol">→</a> <a id="1126" href="extra.nbe.html#1093" class="Bound">Γ</a> <a id="1128" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="1132" href="extra.nbe.html#1111" class="Bound">A</a> 
  <a id="_⊢Nf_.ƛ_"></a><a id="1137" href="extra.nbe.html#1137" class="InductiveConstructor Operator">ƛ_</a> <a id="1140" class="Symbol">:</a> <a id="1142" class="Symbol">∀</a> <a id="1144" class="Symbol">{</a><a id="1145" href="extra.nbe.html#1145" class="Bound">A</a> <a id="1147" href="extra.nbe.html#1147" class="Bound">B</a><a id="1148" class="Symbol">}</a> <a id="1150" class="Symbol">→</a> <a id="1152" href="extra.nbe.html#1093" class="Bound">Γ</a> <a id="1154" href="extra.nbe.html#449" class="InductiveConstructor Operator">,-</a> <a id="1157" href="extra.nbe.html#1145" class="Bound">A</a> <a id="1159" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="1163" href="extra.nbe.html#1147" class="Bound">B</a> <a id="1165" class="Symbol">→</a> <a id="1167" href="extra.nbe.html#1093" class="Bound">Γ</a> <a id="1169" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="1173" href="extra.nbe.html#1145" class="Bound">A</a> <a id="1175" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="1177" href="extra.nbe.html#1147" class="Bound">B</a>
</pre>
<p>Renaming of neutral and normal terms:</p>
<pre class="Agda"><a id="Ren"></a><a id="1231" href="extra.nbe.html#1231" class="Function">Ren</a> <a id="1235" class="Symbol">:</a> <a id="1237" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="1245" class="Symbol">→</a> <a id="1247" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="1255" class="Symbol">→</a> <a id="1257" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1261" href="extra.nbe.html#1231" class="Function">Ren</a> <a id="1265" href="extra.nbe.html#1265" class="Bound">Γ</a> <a id="1267" href="extra.nbe.html#1267" class="Bound">Δ</a> <a id="1269" class="Symbol">=</a> <a id="1271" class="Symbol">∀</a> <a id="1273" class="Symbol">{</a><a id="1274" href="extra.nbe.html#1274" class="Bound">A</a><a id="1275" class="Symbol">}</a> <a id="1277" class="Symbol">→</a> <a id="1279" href="extra.nbe.html#1265" class="Bound">Γ</a> <a id="1281" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="1283" href="extra.nbe.html#1274" class="Bound">A</a> <a id="1285" class="Symbol">→</a> <a id="1287" href="extra.nbe.html#1267" class="Bound">Δ</a> <a id="1289" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="1291" href="extra.nbe.html#1274" class="Bound">A</a>

<a id="ren-nf"></a><a id="1294" href="extra.nbe.html#1294" class="Function">ren-nf</a> <a id="1301" class="Symbol">:</a> <a id="1303" class="Symbol">∀</a> <a id="1305" class="Symbol">{</a><a id="1306" href="extra.nbe.html#1306" class="Bound">Γ</a> <a id="1308" href="extra.nbe.html#1308" class="Bound">Δ</a> <a id="1310" href="extra.nbe.html#1310" class="Bound">A</a><a id="1311" class="Symbol">}</a> <a id="1313" class="Symbol">→</a> <a id="1315" href="extra.nbe.html#1231" class="Function">Ren</a> <a id="1319" href="extra.nbe.html#1306" class="Bound">Γ</a> <a id="1321" href="extra.nbe.html#1308" class="Bound">Δ</a> <a id="1323" class="Symbol">→</a> <a id="1325" href="extra.nbe.html#1306" class="Bound">Γ</a> <a id="1327" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="1331" href="extra.nbe.html#1310" class="Bound">A</a> <a id="1333" class="Symbol">→</a> <a id="1335" href="extra.nbe.html#1308" class="Bound">Δ</a> <a id="1337" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="1341" href="extra.nbe.html#1310" class="Bound">A</a>

<a id="ren-ne"></a><a id="1344" href="extra.nbe.html#1344" class="Function">ren-ne</a> <a id="1351" class="Symbol">:</a> <a id="1353" class="Symbol">∀</a> <a id="1355" class="Symbol">{</a><a id="1356" href="extra.nbe.html#1356" class="Bound">Γ</a> <a id="1358" href="extra.nbe.html#1358" class="Bound">Δ</a> <a id="1360" href="extra.nbe.html#1360" class="Bound">A</a><a id="1361" class="Symbol">}</a> <a id="1363" class="Symbol">→</a> <a id="1365" href="extra.nbe.html#1231" class="Function">Ren</a> <a id="1369" href="extra.nbe.html#1356" class="Bound">Γ</a> <a id="1371" href="extra.nbe.html#1358" class="Bound">Δ</a> <a id="1373" class="Symbol">→</a> <a id="1375" href="extra.nbe.html#1356" class="Bound">Γ</a> <a id="1377" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="1381" href="extra.nbe.html#1360" class="Bound">A</a> <a id="1383" class="Symbol">→</a> <a id="1385" href="extra.nbe.html#1358" class="Bound">Δ</a> <a id="1387" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="1391" href="extra.nbe.html#1360" class="Bound">A</a>
<a id="1393" href="extra.nbe.html#1344" class="Function">ren-ne</a> <a id="1400" href="extra.nbe.html#1400" class="Bound">ρ</a> <a id="1402" class="Symbol">(</a><a id="1403" href="extra.nbe.html#1001" class="InductiveConstructor Operator">`</a> <a id="1405" href="extra.nbe.html#1405" class="Bound">x</a><a id="1406" class="Symbol">)</a>   <a id="1410" class="Symbol">=</a> <a id="1412" href="extra.nbe.html#1001" class="InductiveConstructor Operator">`</a> <a id="1414" href="extra.nbe.html#1400" class="Bound">ρ</a> <a id="1416" href="extra.nbe.html#1405" class="Bound">x</a>
<a id="1418" href="extra.nbe.html#1344" class="Function">ren-ne</a> <a id="1425" href="extra.nbe.html#1425" class="Bound">ρ</a> <a id="1427" class="Symbol">(</a><a id="1428" href="extra.nbe.html#1428" class="Bound">M</a> <a id="1430" href="extra.nbe.html#1033" class="InductiveConstructor Operator">·</a> <a id="1432" href="extra.nbe.html#1432" class="Bound">N</a><a id="1433" class="Symbol">)</a> <a id="1435" class="Symbol">=</a> <a id="1437" href="extra.nbe.html#1344" class="Function">ren-ne</a> <a id="1444" href="extra.nbe.html#1425" class="Bound">ρ</a> <a id="1446" href="extra.nbe.html#1428" class="Bound">M</a> <a id="1448" href="extra.nbe.html#1033" class="InductiveConstructor Operator">·</a> <a id="1450" href="extra.nbe.html#1294" class="Function">ren-nf</a> <a id="1457" href="extra.nbe.html#1425" class="Bound">ρ</a> <a id="1459" href="extra.nbe.html#1432" class="Bound">N</a>

<a id="1462" href="extra.nbe.html#1294" class="Function">ren-nf</a> <a id="1469" href="extra.nbe.html#1469" class="Bound">ρ</a> <a id="1471" class="Symbol">(</a><a id="1472" href="extra.nbe.html#1103" class="InductiveConstructor">ne</a> <a id="1475" href="extra.nbe.html#1475" class="Bound">M</a><a id="1476" class="Symbol">)</a> <a id="1478" class="Symbol">=</a> <a id="1480" href="extra.nbe.html#1103" class="InductiveConstructor">ne</a> <a id="1483" class="Symbol">(</a><a id="1484" href="extra.nbe.html#1344" class="Function">ren-ne</a> <a id="1491" href="extra.nbe.html#1469" class="Bound">ρ</a> <a id="1493" href="extra.nbe.html#1475" class="Bound">M</a><a id="1494" class="Symbol">)</a>
<a id="1496" href="extra.nbe.html#1294" class="Function">ren-nf</a> <a id="1503" href="extra.nbe.html#1503" class="Bound">ρ</a> <a id="1505" class="Symbol">(</a><a id="1506" href="extra.nbe.html#1137" class="InductiveConstructor Operator">ƛ</a> <a id="1508" href="extra.nbe.html#1508" class="Bound">M</a><a id="1509" class="Symbol">)</a>  <a id="1512" class="Symbol">=</a> <a id="1514" href="extra.nbe.html#1137" class="InductiveConstructor Operator">ƛ</a> <a id="1516" href="extra.nbe.html#1294" class="Function">ren-nf</a> <a id="1523" class="Symbol">(λ</a> <a id="1526" class="Symbol">{</a> <a id="1528" href="extra.nbe.html#535" class="InductiveConstructor">Z</a> <a id="1530" class="Symbol">→</a> <a id="1532" href="extra.nbe.html#535" class="InductiveConstructor">Z</a> <a id="1534" class="Symbol">;</a> <a id="1536" class="Symbol">(</a><a id="1537" href="extra.nbe.html#562" class="InductiveConstructor">S</a> <a id="1539" href="extra.nbe.html#1539" class="Bound">x</a><a id="1540" class="Symbol">)</a> <a id="1542" class="Symbol">→</a> <a id="1544" href="extra.nbe.html#562" class="InductiveConstructor">S</a> <a id="1546" class="Symbol">(</a><a id="1547" href="extra.nbe.html#1503" class="Bound">ρ</a> <a id="1549" href="extra.nbe.html#1539" class="Bound">x</a><a id="1550" class="Symbol">)</a> <a id="1552" class="Symbol">})</a> <a id="1555" href="extra.nbe.html#1508" class="Bound">M</a>
</pre>
<h2>Normalization by Evaluation</h2>
<p>We define the semantic domain <code>Γ ⊨ A</code> as follows, and it looks surprisingly similar
to the semantic types from our <em>Semantic Typing</em> part.</p>
<p>The semantic value is indexed by <code>Context</code> and <code>Type</code>. </p>
<ul>
<li>For <strong>base type</strong>, since we do not have literals here, it is a (syntactic) normal term.</li>
<li>For <strong>function type</strong>, it can either be a (syntactic) neutral term or a semantic function, which is a meta (Agda) level function that maps semantic value to another (with an extra argument for renaming).</li>
</ul>
<pre class="Agda"><a id="2095" class="Keyword">infix</a>  <a id="2102" class="Number">4</a> <a id="2104" href="extra.nbe.html#2109" class="Function Operator">_⊨_</a>

<a id="_⊨_"></a><a id="2109" href="extra.nbe.html#2109" class="Function Operator">_⊨_</a> <a id="2113" class="Symbol">:</a> <a id="2115" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="2123" class="Symbol">→</a> <a id="2125" href="extra.nbe.html#332" class="Datatype">Type</a> <a id="2130" class="Symbol">→</a> <a id="2132" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="2136" href="extra.nbe.html#2136" class="Bound">Γ</a> <a id="2138" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2140" href="extra.nbe.html#351" class="InductiveConstructor">`ℕ</a>      <a id="2148" class="Symbol">=</a> <a id="2150" href="extra.nbe.html#2136" class="Bound">Γ</a> <a id="2152" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="2156" href="extra.nbe.html#351" class="InductiveConstructor">`ℕ</a>
<a id="2159" href="extra.nbe.html#2159" class="Bound">Γ</a> <a id="2161" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2163" class="Symbol">(</a><a id="2164" href="extra.nbe.html#2164" class="Bound">A</a> <a id="2166" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2168" href="extra.nbe.html#2168" class="Bound">B</a><a id="2169" class="Symbol">)</a> <a id="2171" class="Symbol">=</a> <a id="2173" href="extra.nbe.html#2159" class="Bound">Γ</a> <a id="2175" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="2179" class="Symbol">(</a><a id="2180" href="extra.nbe.html#2164" class="Bound">A</a> <a id="2182" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2184" href="extra.nbe.html#2168" class="Bound">B</a><a id="2185" class="Symbol">)</a> <a id="2187" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="2189" class="Symbol">(∀</a> <a id="2192" class="Symbol">{</a><a id="2193" href="extra.nbe.html#2193" class="Bound">Δ</a><a id="2194" class="Symbol">}</a> <a id="2196" class="Symbol">→</a> <a id="2198" href="extra.nbe.html#1231" class="Function">Ren</a> <a id="2202" href="extra.nbe.html#2159" class="Bound">Γ</a> <a id="2204" href="extra.nbe.html#2193" class="Bound">Δ</a> <a id="2206" class="Symbol">→</a> <a id="2208" href="extra.nbe.html#2193" class="Bound">Δ</a> <a id="2210" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2212" href="extra.nbe.html#2164" class="Bound">A</a> <a id="2214" class="Symbol">→</a> <a id="2216" href="extra.nbe.html#2193" class="Bound">Δ</a> <a id="2218" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2220" href="extra.nbe.html#2168" class="Bound">B</a><a id="2221" class="Symbol">)</a>
</pre>
<p>Reflection lifts a <strong>syntactic</strong> neutral term to semantic term:</p>
<pre class="Agda"><a id="reflect"></a><a id="2301" href="extra.nbe.html#2301" class="Function">reflect</a> <a id="2309" class="Symbol">:</a> <a id="2311" class="Symbol">∀</a> <a id="2313" class="Symbol">{</a><a id="2314" href="extra.nbe.html#2314" class="Bound">Γ</a> <a id="2316" href="extra.nbe.html#2316" class="Bound">A</a><a id="2317" class="Symbol">}</a> <a id="2319" class="Symbol">→</a> <a id="2321" href="extra.nbe.html#2314" class="Bound">Γ</a> <a id="2323" href="extra.nbe.html#960" class="Datatype Operator">⊢Ne</a> <a id="2327" href="extra.nbe.html#2316" class="Bound">A</a> <a id="2329" class="Symbol">→</a> <a id="2331" href="extra.nbe.html#2314" class="Bound">Γ</a> <a id="2333" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2335" href="extra.nbe.html#2316" class="Bound">A</a>
<a id="2337" href="extra.nbe.html#2301" class="Function">reflect</a> <a id="2345" class="Symbol">{</a><a id="2346" class="Argument">A</a> <a id="2348" class="Symbol">=</a> <a id="2350" href="extra.nbe.html#351" class="InductiveConstructor">`ℕ</a><a id="2352" class="Symbol">}</a>    <a id="2357" href="extra.nbe.html#2357" class="Bound">M</a> <a id="2359" class="Symbol">=</a> <a id="2361" href="extra.nbe.html#1103" class="InductiveConstructor">ne</a> <a id="2364" href="extra.nbe.html#2357" class="Bound">M</a>
<a id="2366" href="extra.nbe.html#2301" class="Function">reflect</a> <a id="2374" class="Symbol">{</a><a id="2375" class="Argument">A</a> <a id="2377" class="Symbol">=</a> <a id="2379" href="extra.nbe.html#2379" class="Bound">A</a> <a id="2381" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2383" href="extra.nbe.html#2383" class="Bound">B</a><a id="2384" class="Symbol">}</a> <a id="2386" href="extra.nbe.html#2386" class="Bound">M</a> <a id="2388" class="Symbol">=</a> <a id="2390" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2395" href="extra.nbe.html#2386" class="Bound">M</a>
</pre>
<p>Reification converts the semantic term into <strong>syntactic</strong> (normal) term:</p>
<pre class="Agda"><a id="reify"></a><a id="2484" href="extra.nbe.html#2484" class="Function">reify</a> <a id="2490" class="Symbol">:</a> <a id="2492" class="Symbol">∀</a> <a id="2494" class="Symbol">{</a><a id="2495" href="extra.nbe.html#2495" class="Bound">Γ</a> <a id="2497" href="extra.nbe.html#2497" class="Bound">A</a><a id="2498" class="Symbol">}</a> <a id="2500" class="Symbol">→</a> <a id="2502" href="extra.nbe.html#2495" class="Bound">Γ</a> <a id="2504" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2506" href="extra.nbe.html#2497" class="Bound">A</a> <a id="2508" class="Symbol">→</a> <a id="2510" href="extra.nbe.html#2495" class="Bound">Γ</a> <a id="2512" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="2516" href="extra.nbe.html#2497" class="Bound">A</a>
<a id="2518" href="extra.nbe.html#2484" class="Function">reify</a> <a id="2524" class="Symbol">{</a><a id="2525" class="Argument">A</a> <a id="2527" class="Symbol">=</a> <a id="2529" href="extra.nbe.html#351" class="InductiveConstructor">`ℕ</a><a id="2531" class="Symbol">}</a>    <a id="2536" href="extra.nbe.html#2536" class="Bound">x</a>        <a id="2545" class="Symbol">=</a> <a id="2547" href="extra.nbe.html#2536" class="Bound">x</a>
<a id="2549" href="extra.nbe.html#2484" class="Function">reify</a> <a id="2555" class="Symbol">{</a><a id="2556" class="Argument">A</a> <a id="2558" class="Symbol">=</a> <a id="2560" href="extra.nbe.html#2560" class="Bound">A</a> <a id="2562" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2564" href="extra.nbe.html#2564" class="Bound">B</a><a id="2565" class="Symbol">}</a> <a id="2567" class="Symbol">(</a><a id="2568" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2573" href="extra.nbe.html#2573" class="Bound">x</a><a id="2574" class="Symbol">)</a> <a id="2576" class="Symbol">=</a> <a id="2578" href="extra.nbe.html#1103" class="InductiveConstructor">ne</a> <a id="2581" href="extra.nbe.html#2573" class="Bound">x</a>
<a id="2583" href="extra.nbe.html#2484" class="Function">reify</a> <a id="2589" class="Symbol">{</a><a id="2590" class="Argument">A</a> <a id="2592" class="Symbol">=</a> <a id="2594" href="extra.nbe.html#2594" class="Bound">A</a> <a id="2596" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2598" href="extra.nbe.html#2598" class="Bound">B</a><a id="2599" class="Symbol">}</a> <a id="2601" class="Symbol">(</a><a id="2602" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2607" href="extra.nbe.html#2607" class="Bound">y</a><a id="2608" class="Symbol">)</a> <a id="2610" class="Symbol">=</a> <a id="2612" href="extra.nbe.html#1137" class="InductiveConstructor Operator">ƛ</a> <a id="2614" href="extra.nbe.html#2484" class="Function">reify</a> <a id="2620" class="Symbol">(</a><a id="2621" href="extra.nbe.html#2607" class="Bound">y</a> <a id="2623" href="extra.nbe.html#562" class="InductiveConstructor">S</a> <a id="2625" class="Symbol">(</a><a id="2626" href="extra.nbe.html#2301" class="Function">reflect</a> <a id="2634" class="Symbol">(</a><a id="2635" href="extra.nbe.html#1001" class="InductiveConstructor Operator">`</a> <a id="2637" href="extra.nbe.html#535" class="InductiveConstructor">Z</a><a id="2638" class="Symbol">)))</a>
</pre>
<p>Renaming of semantic values:</p>
<pre class="Agda"><a id="ren⊨"></a><a id="2685" href="extra.nbe.html#2685" class="Function">ren⊨</a> <a id="2690" class="Symbol">:</a> <a id="2692" class="Symbol">∀</a> <a id="2694" class="Symbol">{</a><a id="2695" href="extra.nbe.html#2695" class="Bound">Γ</a> <a id="2697" href="extra.nbe.html#2697" class="Bound">Δ</a> <a id="2699" href="extra.nbe.html#2699" class="Bound">A</a><a id="2700" class="Symbol">}</a> <a id="2702" class="Symbol">→</a> <a id="2704" href="extra.nbe.html#1231" class="Function">Ren</a> <a id="2708" href="extra.nbe.html#2695" class="Bound">Γ</a> <a id="2710" href="extra.nbe.html#2697" class="Bound">Δ</a> <a id="2712" class="Symbol">→</a> <a id="2714" href="extra.nbe.html#2695" class="Bound">Γ</a> <a id="2716" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2718" href="extra.nbe.html#2699" class="Bound">A</a> <a id="2720" class="Symbol">→</a> <a id="2722" href="extra.nbe.html#2697" class="Bound">Δ</a> <a id="2724" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="2726" href="extra.nbe.html#2699" class="Bound">A</a>
<a id="2728" href="extra.nbe.html#2685" class="Function">ren⊨</a> <a id="2733" class="Symbol">{</a><a id="2734" class="Argument">A</a> <a id="2736" class="Symbol">=</a> <a id="2738" href="extra.nbe.html#351" class="InductiveConstructor">`ℕ</a><a id="2740" class="Symbol">}</a>    <a id="2745" href="extra.nbe.html#2745" class="Bound">ρ</a> <a id="2747" href="extra.nbe.html#2747" class="Bound">x</a>        <a id="2756" class="Symbol">=</a> <a id="2758" href="extra.nbe.html#1294" class="Function">ren-nf</a> <a id="2765" href="extra.nbe.html#2745" class="Bound">ρ</a> <a id="2767" href="extra.nbe.html#2747" class="Bound">x</a>
<a id="2769" href="extra.nbe.html#2685" class="Function">ren⊨</a> <a id="2774" class="Symbol">{</a><a id="2775" class="Argument">A</a> <a id="2777" class="Symbol">=</a> <a id="2779" href="extra.nbe.html#2779" class="Bound">A</a> <a id="2781" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2783" href="extra.nbe.html#2783" class="Bound">B</a><a id="2784" class="Symbol">}</a> <a id="2786" href="extra.nbe.html#2786" class="Bound">ρ</a> <a id="2788" class="Symbol">(</a><a id="2789" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2794" href="extra.nbe.html#2794" class="Bound">x</a><a id="2795" class="Symbol">)</a> <a id="2797" class="Symbol">=</a> <a id="2799" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2804" class="Symbol">(</a><a id="2805" href="extra.nbe.html#1344" class="Function">ren-ne</a> <a id="2812" href="extra.nbe.html#2786" class="Bound">ρ</a> <a id="2814" href="extra.nbe.html#2794" class="Bound">x</a><a id="2815" class="Symbol">)</a>
<a id="2817" href="extra.nbe.html#2685" class="Function">ren⊨</a> <a id="2822" class="Symbol">{</a><a id="2823" class="Argument">A</a> <a id="2825" class="Symbol">=</a> <a id="2827" href="extra.nbe.html#2827" class="Bound">A</a> <a id="2829" href="extra.nbe.html#364" class="InductiveConstructor Operator">⇒</a> <a id="2831" href="extra.nbe.html#2831" class="Bound">B</a><a id="2832" class="Symbol">}</a> <a id="2834" href="extra.nbe.html#2834" class="Bound">ρ</a> <a id="2836" class="Symbol">(</a><a id="2837" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2842" href="extra.nbe.html#2842" class="Bound">y</a><a id="2843" class="Symbol">)</a> <a id="2845" class="Symbol">=</a> <a id="2847" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2852" class="Symbol">(λ</a> <a id="2855" href="extra.nbe.html#2855" class="Bound">ρ&#39;</a> <a id="2858" class="Symbol">→</a> <a id="2860" href="extra.nbe.html#2842" class="Bound">y</a> <a id="2862" class="Symbol">(λ</a> <a id="2865" href="extra.nbe.html#2865" class="Bound">x</a> <a id="2867" class="Symbol">→</a> <a id="2869" href="extra.nbe.html#2855" class="Bound">ρ&#39;</a> <a id="2872" class="Symbol">(</a><a id="2873" href="extra.nbe.html#2834" class="Bound">ρ</a> <a id="2875" href="extra.nbe.html#2865" class="Bound">x</a><a id="2876" class="Symbol">)))</a>
</pre>
<p>An environment is a function that maps a variable to a semantic value 
(under a different context).</p>
<pre class="Agda"><a id="Env"></a><a id="2994" href="extra.nbe.html#2994" class="Function">Env</a> <a id="2998" class="Symbol">:</a> <a id="3000" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="3008" class="Symbol">→</a> <a id="3010" href="extra.nbe.html#410" class="Datatype">Context</a> <a id="3018" class="Symbol">→</a> <a id="3020" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="3024" href="extra.nbe.html#2994" class="Function">Env</a> <a id="3028" href="extra.nbe.html#3028" class="Bound">Γ</a> <a id="3030" href="extra.nbe.html#3030" class="Bound">Δ</a> <a id="3032" class="Symbol">=</a> <a id="3034" class="Symbol">∀</a> <a id="3036" class="Symbol">{</a><a id="3037" href="extra.nbe.html#3037" class="Bound">A</a><a id="3038" class="Symbol">}</a> <a id="3040" class="Symbol">→</a> <a id="3042" href="extra.nbe.html#3028" class="Bound">Γ</a> <a id="3044" href="extra.nbe.html#500" class="Datatype Operator">∋</a> <a id="3046" href="extra.nbe.html#3037" class="Bound">A</a> <a id="3048" class="Symbol">→</a> <a id="3050" href="extra.nbe.html#3030" class="Bound">Δ</a> <a id="3052" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="3054" href="extra.nbe.html#3037" class="Bound">A</a>
</pre>
<p>Evaluation interprets a <strong>syntactic term</strong> into the semantic term:</p>
<pre class="Agda"><a id="eval"></a><a id="3137" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3142" class="Symbol">:</a> <a id="3144" class="Symbol">∀</a> <a id="3146" class="Symbol">{</a><a id="3147" href="extra.nbe.html#3147" class="Bound">Γ</a> <a id="3149" href="extra.nbe.html#3149" class="Bound">Δ</a> <a id="3151" href="extra.nbe.html#3151" class="Bound">A</a><a id="3152" class="Symbol">}</a> <a id="3154" class="Symbol">→</a> <a id="3156" href="extra.nbe.html#3147" class="Bound">Γ</a> <a id="3158" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="3160" href="extra.nbe.html#3151" class="Bound">A</a> <a id="3162" class="Symbol">→</a> <a id="3164" href="extra.nbe.html#2994" class="Function">Env</a> <a id="3168" href="extra.nbe.html#3147" class="Bound">Γ</a> <a id="3170" href="extra.nbe.html#3149" class="Bound">Δ</a> <a id="3172" class="Symbol">→</a> <a id="3174" href="extra.nbe.html#3149" class="Bound">Δ</a> <a id="3176" href="extra.nbe.html#2109" class="Function Operator">⊨</a> <a id="3178" href="extra.nbe.html#3151" class="Bound">A</a>
<a id="3180" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3185" class="Symbol">(</a><a id="3186" href="extra.nbe.html#693" class="InductiveConstructor Operator">`</a> <a id="3188" href="extra.nbe.html#3188" class="Bound">x</a><a id="3189" class="Symbol">)</a> <a id="3191" href="extra.nbe.html#3191" class="Bound">η</a> <a id="3193" class="Symbol">=</a> <a id="3195" href="extra.nbe.html#3191" class="Bound">η</a> <a id="3197" href="extra.nbe.html#3188" class="Bound">x</a>
<a id="3199" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3204" class="Symbol">(</a><a id="3205" href="extra.nbe.html#723" class="InductiveConstructor Operator">ƛ</a> <a id="3207" href="extra.nbe.html#3207" class="Bound">M</a><a id="3208" class="Symbol">)</a> <a id="3210" href="extra.nbe.html#3210" class="Bound">η</a> <a id="3212" class="Symbol">=</a> <a id="3214" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3219" class="Symbol">λ</a> <a id="3221" href="extra.nbe.html#3221" class="Bound">ρ</a> <a id="3223" href="extra.nbe.html#3223" class="Bound">N</a> <a id="3225" class="Symbol">→</a> <a id="3227" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3232" href="extra.nbe.html#3207" class="Bound">M</a> <a id="3234" class="Symbol">λ</a> <a id="3236" class="Symbol">{</a> <a id="3238" href="extra.nbe.html#535" class="InductiveConstructor">Z</a> <a id="3240" class="Symbol">→</a> <a id="3242" href="extra.nbe.html#3223" class="Bound">N</a> <a id="3244" class="Symbol">;</a> <a id="3246" class="Symbol">(</a><a id="3247" href="extra.nbe.html#562" class="InductiveConstructor">S</a> <a id="3249" href="extra.nbe.html#3249" class="Bound">x</a><a id="3250" class="Symbol">)</a> <a id="3252" class="Symbol">→</a> <a id="3254" href="extra.nbe.html#2685" class="Function">ren⊨</a> <a id="3259" href="extra.nbe.html#3221" class="Bound">ρ</a> <a id="3261" class="Symbol">(</a><a id="3262" href="extra.nbe.html#3210" class="Bound">η</a> <a id="3264" href="extra.nbe.html#3249" class="Bound">x</a><a id="3265" class="Symbol">)</a> <a id="3267" class="Symbol">}</a>
<a id="3269" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3274" class="Symbol">(</a><a id="3275" href="extra.nbe.html#3275" class="Bound">M</a> <a id="3277" href="extra.nbe.html#764" class="InductiveConstructor Operator">·</a> <a id="3279" href="extra.nbe.html#3279" class="Bound">N</a><a id="3280" class="Symbol">)</a> <a id="3282" href="extra.nbe.html#3282" class="Bound">η</a> <a id="3284" class="Keyword">with</a> <a id="3289" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3294" href="extra.nbe.html#3275" class="Bound">M</a> <a id="3296" href="extra.nbe.html#3282" class="Bound">η</a>
<a id="3298" class="Symbol">...</a> <a id="3302" class="Symbol">|</a> <a id="3304" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3309" href="extra.nbe.html#3309" class="Bound">x</a> <a id="3311" class="Symbol">=</a> <a id="3313" href="extra.nbe.html#2301" class="Function">reflect</a> <a id="3321" class="Symbol">(</a><a id="3322" href="extra.nbe.html#3309" class="Bound">x</a> <a id="3324" href="extra.nbe.html#1033" class="InductiveConstructor Operator">·</a> <a id="3326" href="extra.nbe.html#2484" class="Function">reify</a> <a id="3332" class="Symbol">(</a><a id="3333" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3338" class="Bound">N</a> <a id="3340" class="Bound">η</a><a id="3341" class="Symbol">))</a>
<a id="3344" class="Symbol">...</a> <a id="3348" class="Symbol">|</a> <a id="3350" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3355" href="extra.nbe.html#3355" class="Bound">y</a> <a id="3357" class="Symbol">=</a> <a id="3359" href="extra.nbe.html#3355" class="Bound">y</a> <a id="3361" class="Symbol">(λ</a> <a id="3364" href="extra.nbe.html#3364" class="Bound">z</a> <a id="3366" class="Symbol">→</a> <a id="3368" href="extra.nbe.html#3364" class="Bound">z</a><a id="3369" class="Symbol">)</a> <a id="3371" class="Symbol">(</a><a id="3372" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3377" class="Bound">N</a> <a id="3379" class="Bound">η</a><a id="3380" class="Symbol">)</a>
</pre>
<p>Normalization proceeds with evaluation and reification:</p>
<pre class="Agda"><a id="norm"></a><a id="3452" href="extra.nbe.html#3452" class="Function">norm</a> <a id="3457" class="Symbol">:</a> <a id="3459" class="Symbol">∀</a> <a id="3461" class="Symbol">{</a><a id="3462" href="extra.nbe.html#3462" class="Bound">Γ</a> <a id="3464" href="extra.nbe.html#3464" class="Bound">A</a><a id="3465" class="Symbol">}</a> <a id="3467" class="Symbol">→</a> <a id="3469" href="extra.nbe.html#3462" class="Bound">Γ</a> <a id="3471" href="extra.nbe.html#654" class="Datatype Operator">⊢</a> <a id="3473" href="extra.nbe.html#3464" class="Bound">A</a> <a id="3475" class="Symbol">→</a> <a id="3477" href="extra.nbe.html#3462" class="Bound">Γ</a> <a id="3479" href="extra.nbe.html#921" class="Datatype Operator">⊢Nf</a> <a id="3483" href="extra.nbe.html#3464" class="Bound">A</a>
<a id="3485" href="extra.nbe.html#3452" class="Function">norm</a> <a id="3490" href="extra.nbe.html#3490" class="Bound">M</a> <a id="3492" class="Symbol">=</a> <a id="3494" href="extra.nbe.html#2484" class="Function">reify</a> <a id="3500" class="Symbol">(</a><a id="3501" href="extra.nbe.html#3137" class="Function">eval</a> <a id="3506" href="extra.nbe.html#3490" class="Bound">M</a> <a id="3508" class="Symbol">λ</a> <a id="3510" href="extra.nbe.html#3510" class="Bound">x</a> <a id="3512" class="Symbol">→</a> <a id="3514" href="extra.nbe.html#2301" class="Function">reflect</a> <a id="3522" class="Symbol">(</a><a id="3523" href="extra.nbe.html#1001" class="InductiveConstructor Operator">`</a> <a id="3525" href="extra.nbe.html#3510" class="Bound">x</a><a id="3526" class="Symbol">))</a>
</pre>
    </main>
  </div>
</body>

</html>